---
layout: default
---

{% assign i18n = site.data.languages %}
{% assign filtered_pages = site.pages | where: 'list_on_index', true %}
{% assign content_available = page.content | strip_newlines %}
{%- include header.html css_class="navbar-dark" -%}

<div id="jumbotron" class="jumbotron jumbotron-fluid bg-dark" style="background-image: url('{{ page.banner }}')"></div>

<div class="container">
  <div class="brand-info mb-4">
    <div class="logo rounded-circle" style="background-image: url('{{ site.jekyll_cmdbrew.logo }}')"></div>
    <div class="mt-3">
      <h5>{{ site.title }}</h5>
      {{ page.brief }}
    </div>
  </div>

  <ul class="nav nav-tabs" id="myTab" role="tablist">
    {% assign home_label = i18n.home.tabs.home | default: 'Home' %}
    {% assign about_label = i18n.about.tabs.about | default: 'About' %}
    {% assign categories_label = i18n.categories.tabs.categories | default: 'Categories' %}
    {% assign pages_label = i18n.pages.tabs.pages | default: 'Pages' %}

    {%- include tabs/link.html css_class="active" key="home" content=home_label -%}

    {%- if content_available.size > 0 -%}
      {%- include tabs/link.html key="about" content=about_label -%}
    {% endif -%}

    {%- if site.categories.size > 0 -%}
      {%- include tabs/link.html key="categories" content=categories_label -%}
    {%- endif -%}

    {%- if filtered_pages.size > 0 -%}
      {%- include tabs/link.html key="pages" content=pages_label -%}
    {%- endif -%}
  </ul>

  <div class="tab-content py-3">
    {% capture home_content %}
      {%- if site.posts.size > 0 -%}
        <ul class="list-unstyled">
          {% if paginator %}
            {% assign posts = paginator.posts %}
          {% else %}
            {% assign posts = site.posts %}
          {% endif %}

          {%- for post in posts -%}
            {% include post.html post = post %}
          {%- endfor -%}
        </ul>
        <a href="/posts">{{ i18n.home.links.posts }}</a>
      {%- endif -%}
    {% endcapture %}
    {%- include tabs/pane.html css_class="show active" key="home" content=home_content -%}

    {%- if content_available.size > 0 -%}
      {%- include tabs/pane.html key="about" content=content -%}
    {%- endif -%}

    {%- if site.categories.size > 0 -%}
      {% capture categories_content %}
        {% assign categories = site.categories | sort %}
        {% assign last_heading = "" %}
        {%- for category in categories -%}
          <dl class="row list-alphabetical">
            {% capture category_name %}{{ category | first }}{% endcapture %}
            {% assign heading = category_name | slice: 0 | upcase %}

            <dt class="col-auto heading text-muted">
              {%- if heading != last_heading -%}
                {{ heading }}
              {%- endif -%}
            </dt>

            <dd class="col"><a href="/categories/{{ category_name }}">{{ category_name }}</a></dd>
          </dl>
          {% assign last_heading = heading %}
        {%- endfor -%}
      {% endcapture %}
      {%- include tabs/pane.html key="categories" content=categories_content -%}
    {%- endif -%}

    {%- if filtered_pages.size > 0 -%}
      {% capture pages_content %}
        <dl class="row list-alphabetical">
          {% assign last_heading = "" %}
          {%- for page in filtered_pages -%}
            {% assign heading = page.title | slice: 0 | upcase %}

            <dt class="col-auto heading text-muted">
              {% if heading != last_heading %}
                {{ heading }}
              {% endif %}
            </dt>

            <dd class="col"><a href="{{ page.url | relative_url }}">{{ page.title }}</a></dd>
            {% assign last_heading = heading %}
          {%- endfor -%}
        </dl>
      {% endcapture %}
      {%- include tabs/pane.html key="pages" content=pages_content -%}
    {%- endif -%}
  </div>
</div>